/*! Native Promise Only
v0.8.1 (c) Kyle Simpson
MIT License: http://getify.mit-license.org
*/(function(t,n,r){n[t]=n[t]||r(),typeof module!="undefined"&&module.exports?module.exports=n[t]:typeof define=="function"&&define.amd&&define(function(){return n[t]})})("Promise",typeof global!="undefined"?global:this,function(){"use strict";function u(e,t){r.add(e,t),n||(n=s(r.drain))}function a(e){var t,n=typeof e;return e!=null&&(n=="object"||n=="function")&&(t=e.then),typeof t=="function"?t:!1}function f(){for(var e=0;e<this.chain.length;e++)l(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var r,i;try{t===!1?n.reject(e.msg):(t===!0?r=e.msg:r=t.call(void 0,e.msg),r===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=a(r))?i.call(r,n.resolve,n.reject):n.resolve(r))}catch(s){n.reject(s)}}function c(e){var t,n=this;if(n.triggered)return;n.triggered=!0,n.def&&(n=n.def);try{(t=a(e))?u(function(){var r=new d(n);try{t.call(e,function(){c.apply(r,arguments)},function(){h.apply(r,arguments)})}catch(i){h.call(r,i)}}):(n.msg=e,n.state=1,n.chain.length>0&&u(f,n))}catch(r){h.call(new d(n),r)}}function h(e){var t=this;if(t.triggered)return;t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&u(f,t)}function p(e,t,n,r){for(var i=0;i<t.length;i++)(function(s){e.resolve(t[s]).then(function(t){n(s,t)},r)})(i)}function d(e){this.def=e,this.triggered=!1}function v(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(e){if(typeof e!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var t=new v(this);this.then=function(n,r){var i={success:typeof n=="function"?n:!0,failure:typeof r=="function"?r:!1};return i.promise=new this.constructor(function(t,n){if(typeof t!="function"||typeof n!="function")throw TypeError("Not a function");i.resolve=t,i.reject=n}),t.chain.push(i),t.state!==0&&u(f,t),i.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(n){c.call(t,n)},function(n){h.call(t,n)})}catch(n){h.call(t,n)}}var t,n,r,i=Object.prototype.toString,s=typeof setImmediate!="undefined"?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,n,r,i){return Object.defineProperty(t,n,{value:r,writable:!0,configurable:i!==!1})}}catch(o){t=function(t,n,r){return t[n]=r,t}}r=function(){function s(e,t){this.fn=e,this.self=t,this.next=void 0}var t,r,i;return{add:function(n,o){i=new s(n,o),r?r.next=i:t=i,r=i,i=void 0},drain:function(){var i=t;t=r=n=void 0;while(i)i.fn.call(i.self),i=i.next}}}();var g=t({},"constructor",m,!1);return m.prototype=g,t(g,"__NPO__",0,!1),t(m,"resolve",function(t){var n=this;return t&&typeof t=="object"&&t.__NPO__===1?t:new n(function(n,r){if(typeof n!="function"||typeof r!="function")throw TypeError("Not a function");n(t)})}),t(m,"reject",function(t){return new this(function(n,r){if(typeof n!="function"||typeof r!="function")throw TypeError("Not a function");r(t)})}),t(m,"all",function(t){var n=this;return i.call(t)!="[object Array]"?n.reject(TypeError("Not an array")):t.length===0?n.resolve([]):new n(function(r,i){if(typeof r!="function"||typeof i!="function")throw TypeError("Not a function");var s=t.length,o=Array(s),u=0;p(n,t,function(t,n){o[t]=n,++u===s&&r(o)},i)})}),t(m,"race",function(t){var n=this;return i.call(t)!="[object Array]"?n.reject(TypeError("Not an array")):new n(function(r,i){if(typeof r!="function"||typeof i!="function")throw TypeError("Not a function");p(n,t,function(t,n){r(n)},i)})}),m});(function(){Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(this==null)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(i===0)return-1;var s=+t||0;Math.abs(s)===Infinity&&(s=0);if(s>=i)return-1;n=Math.max(s>=0?s:i-Math.abs(s),0);while(n<i){if(n in r&&r[n]===e)return n;n++}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t,n,r=Object(this),i=r.length>>>0;if(i===0)return-1;t=i-1,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:t!=0&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))));for(n=t>=0?Math.min(t,i-1):i-Math.abs(t);n>=0;n--)if(n in r&&r[n]===e)return n;return-1}),Array.prototype.every||(Array.prototype.every=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<n;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0}),Array.prototype.every||(Array.prototype.every=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<n;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<n;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,n){var r,i;if(this==null)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if(typeof t!="function")throw new TypeError(t+" is not a function");arguments.length>1&&(r=n),i=0;while(i<o){var u;i in s&&(u=s[i],t.call(r,u,i,s)),i++}}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=[],i=arguments.length>=2?arguments[1]:void 0;for(var s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r,i=this.length>>>0,s=!1;1<arguments.length&&(r=t,s=!0);for(n=0;i>n;++n)this.hasOwnProperty(n)&&(s?r=e(r,this[n],n,this):(r=this[n],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),"function"!=typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t=Object(this),n=t.length>>>0,r=n-1,i;if(arguments.length>=2)i=arguments[1];else{while(r>=0&&!r in t)r--;if(r<0)throw new TypeError("Reduce of empty array with no initial value");i=t[r--]}for(;r>=0;r--)r in t&&(i=e(i,t[r],r,t));return i})})();(function(e){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();if(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(this==null)throw new TypeError("can't convert "+this+" to object");var t=""+this;e=+e,e!=e&&(e=0);if(e<0)throw new RangeError("repeat count must be non-negative");if(e==Infinity)throw new RangeError("repeat count must be less than infinity");e=Math.floor(e);if(t.length==0||e==0)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var n="";for(;;){(e&1)==1&&(n+=t),e>>>=1;if(e==0)break;t+=t}return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})})(this);(function(e){"use strict";function t(t,n){n=n||"#d20000";if(!e.console)return;e.console.log("%c"+t,"color:"+n)}function n(e,n,i){return function(){var s={},o=[];for(var u in e){if(!e.hasOwnProperty(u))continue;var a=e[u];if(!a.ok){s=s||{},o.push(i+" "+(isNaN(u)?u:"")+" fail.  depend on "+(a.deps?a.deps.join(","):"none"));for(var f=0;f<a.deps.length;f++){var l=a.deps[f];s[l]||(s[l]=1)}}}if(o.length>0){for(var u in s)r.get(u)||t(i+" "+u+" not exist!");for(var f=0;f<o.length;f++)t(o[f],n)}}}function s(e){return e=typeof e=="string"?[e]:e,e[e.length-1]===undefined&&e.pop(),e}function o(e,t,n){if(typeof e!="string")throw new Error("\u6a21\u5757\u7684key\u5fc5\u987b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32");n===undefined?(n=t,t=undefined):t=s(t);var o=r.add(e,{deps:t,fun:n});o&&i.each(function(e){return r.checkReady(e.deps)?(e.fun.apply(null,r.getFuns(e.deps)),!0):!1})}function u(e,t){e=s(e);if(t===undefined)return r.get(e)?r.get(e).fun:undefined;r.checkReady(e)?t.apply(null,r.getFuns(e)):i.add({deps:e,fun:t})}var r=function(){function t(t){var n=[];for(var r=0;r<t.length;r++)n.push(e[t[r]].fun);return n}function r(){var n,r,s;do{s=!1;for(var o in e)r=e[o],n=r.deps,!r.ok&&i(n)&&(r.ok=!0,r.fun=r.fun.apply(null,t(n)),s=!0)}while(s)}function i(t){var n=!0;for(var r=0;r<t.length;r++)if(!e[t[r]]||!e[t[r]].ok){n=!1;break}return n}function s(n,s){var o=s.deps;return o&&!i(o)?(s.ok=!1,e[n]=s):(s.ok=!0,o?s.fun=s.fun.apply(null,t(o)):s.fun=s.fun(),e[n]=s,r()),s.ok}function o(t){return e[t]}var e={};return{add:s,checkReady:i,getFuns:t,get:o,debug:n(e,"#000066","define")}}(),i=function(){function t(t){e.push(t)}function r(t){var n=e.length;while(n--)t(e[n])&&e.splice(n,1)}var e=[];return{add:t,each:r,debug:n(e,"green","require")}}();e.define=o,e.require=u,e.__debug__=function(){r.debug(),i.debug()}})(this);define("elego.event",function(){function t(e,t){if(!this._event||!this._event[e])return;for(var n=0;n<this._event[e].length;n++)this._event[e][n].call(this,t)}function n(t){for(var n in e)e.hasOwnProperty(n)&&(typeof t=="function"&&(t.prototype[n]=e[n]),typeof t=="object"&&(t[n]=e[n]))}function r(e,t,n){if(!e)return;t=t.split(",");if(window.addEventListener)for(var r=0;r<t.length;r++)e.addEventListener(t[r],n,!1);else for(var r=0;r<t.length;r++)e.attachEvent("on"+t[r],function(){var t=window.event;t.target=t.srcElement,t.stopPropagation=function(){t.cancelBubble=!0},t.preventDefault=function(){t.returnValue=!1},n.call(e,t)})}function i(e,t,n){t=t.split(",");if(window.addEventListener)for(var r=0;r<t.length;r++)e.removeEventListener(t[r],n);else for(var r=0;r<t.length;r++)e.detachEvent("on"+t[r],n)}var e={on:function(e,t){typeof e=="string"&&(e=[e]);for(var n=0;n<e.length;n++)this._event=this._event||{},this._event[e[n]]=this._event[e[n]]||[],this._event[e[n]].push(t)},once:function(e,t){this._eventOnce=this._eventOnce||{},this._eventOnce[e]=this._eventOnce[e]||[],this._eventOnce[e].hasEmited===!0?t.call(this,this._eventOnce[e].data):(this._eventOnce[e]=this._eventOnce[e]||[],this._eventOnce[e].push(t))},un:function(){},emit:function(e,n,r){t.call(this,e,n),r&&t.call(document,e,n)},emitOnce:function(e,t){this._eventOnce=this._eventOnce||{},this._eventOnce[e]=this._eventOnce[e]||[];if(this._eventOnce[e].hasEmited===!0)return!1;this._eventOnce[e].hasEmited=!0,this._eventOnce[e].data=t;for(var n=0;n<this._eventOnce[e].length;n++)this._eventOnce[e][n].call(this,t);return!0}};return n(window.document),{eventable:n,on:r,off:i}});define("elego.format",function(){function e(e,n,r){return e.replace(/#{([^}]+)}/g,function(){if(typeof n=="string")return n;var e=n,i=arguments[1].split(".");for(var s=0;s<i.length;s++){e=e[i[s]];if(e===undefined)return""}return r.isEscape===!0&&(e=t(e)),e})}function t(e){return(new String(e)).replace(/>/g,"&gt;").replace(/</g,"&lt")}return function(t,n,r){var i="",s="",o;r=r||{},typeof r=="function"?o=r:o=r.cb;if(Object.prototype.toString.call(n)=="[object Array]")for(var u=0;u<n.length;u++)o?s=o(u,n[u]):s=n[u],i+=e(t,s,r);else i=e(t,n,r);return i}});define("elego.serverdata",["other.jquery"],function(e){function r(t){if(t===undefined)return n;var r=t.split("."),i=n;for(var s=0;s<r.length;s++){i=i[r[s]];if(i===undefined)return}return e.isArray(i)?i=e.extend(!0,[],i):typeof i=="object"&&i!==null&&(i=e.extend(!0,{},i)),i}function i(e){if(e===undefined)return!1;var t=e.split("."),r=n||{};for(var i=0;i<t.length;i++){r=r[t[i]];if(r===undefined)return!1}return r!==undefined?!0:!1}function s(e,t){if(i(e))return!1;if(e.indexOf(".")>=0)throw new Error("not supported!");n[e]=t}function o(t,r){r===undefined&&typeof t=="object"?e.extend(n,t):n[t]=r}var t=window.systemserverdata||{},n=window.serverdata||{};return n=e.extend(t,n),window.serverdata=null,window.systemserverdata=null,{set:o,get:r,add:s,has:i}});define("elego.viewport",function(){return{get:function(){return window.innerWidth!=null?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}}});define("elego.lazy",["elego.viewport","elego.event"],function(e,t){"use strict";function c(i,o){o=o||"image",s=e.get();if(typeof i!="object")return;"length"in i||(i=[i]);for(var a=0;a<i.length;a++){if(i[a].offsetWidth==0)continue;var f={element:i[a],key:r,type:o};if(y(f))continue;n.push(f)}return u===!1&&(t.on(window,"scroll,resize",p),u=!0),r++}function h(e){}function p(){a!=null&&window.clearTimeout(a),a=window.setTimeout(d,f)}function d(){s=e.get();var r=n.length;while(r--)y(n[r])&&n.splice(r,1);a=null,n.length==0&&(t.off(window,"scroll,resize",p),u=!1)}function m(e){}function g(e){l.emit("lazyload",e.id)}function y(e){if(e.width===0)return!1;var t=e.element.getBoundingClientRect();return t.bottom+o>0&&t.top-o-s.height<0?(v[e.type](e.element),!0):!1}function b(e){var t=e.src;e.onerror=function(){this.src=t,e.onerror=null,e.onload=null},e.onload=function(){e.onerror=null,e.onload=null},e.src=e.getAttribute(i)}function w(e){for(var t=0;t<n.length;t++)if(n[t].element===e){n.splice(t,1);return}}function E(e){if(typeof e!="object")return;"length"in e||(e=[e]);for(var t=0;t<e.length;t++)w(e[t]),b(e[t])}var n=[],r=0,i="data-src",s,o=50,u=!1,a=null,f=20,l={};t.eventable(l);var v={image:b,iframe:m,other:g};return l.add=c,l.loadnow=E,l});define("elego.cookie",function(){function e(e){e=e||{},this.path=e.path||"/",this.domain=e.domain||"",this.expires=e.expires||31536e6,this.secure=e.secure||""}return e.prototype={set:function(e,t){var n=new Date;typeof this.expires=="number"&&n.setTime(n.getTime()+this.expires),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path="+this.path+(this.domain==""?"":"; domain="+this.domain)+(this.secure?"; secure":"")},get:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},has:function(e){return this.get(e)===""?!1:!0},remove:function(e){var t=this.expires;this.expires=-31536e6,this.set(e,""),this.expires=t}},e.set=function(t,n,r){(new e(r)).set(t,n)},e.get=function(t,n){return(new e(n)).get(t)},e.remove=function(t,n){(new e(n)).remove(t)},e.has=function(t){return(new e).has(t)},e});define("elego.debug",[],function(){function t(t){e.push(t)}function n(){if(window.console&&window.console.log)for(var t=0;t<e.length;t++)window.console.log(e[t]);else alert(e)}function r(){return e}var e=[];return{get:r,add:t,show:n}});define("elego.browser",function(){var e=window.navigator,t=e.userAgent.toLowerCase(),n=/(msie|webkit|gecko|presto|opera|safari|firefox|chrome|maxthon|android|ipad|iphone|webos|hpwos|trident)[ \/os]*([\d_.]+)/ig,r={platform:e.platform};t.replace(n,function(e,t,n){r[t]||(r[t]=n)}),r.opera&&t.replace(/opera.*version\/([\d.]+)/,function(e,t){r.opera=t}),!r.msie&&r.trident&&t.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/ig,function(e,t){r.msie=t});if(r.msie){r.ie=r.msie;var i=parseInt(r.msie,10);r["ie"+i]=!0}return r});define("elego.docport",function(){function e(){var e,t,n,r,i=document.documentElement;return e=i.scrollWidth,t=i.scrollHeight,n=i.clientWidth,r=i.clientHeight,{height:Math.max(t,r),width:Math.max(e,n)}}return{get:e}});define("elego.mask",["elego.docport","elego.browser","other.jquery"],function(e,t){function o(){var t=e.get();n.style.height=t.height+"px",n.style.width=t.width+"px"}function u(){if(n.style.display==="none")return;i!==undefined&&(window.clearTimeout(i),i=undefined),i=window.setTimeout(o,s)}function a(){n=document.createElement("div"),n.className="g-mask",t.ie6&&(n.innerHTML='<iframe frameborder="0"></iframe>',o(),$(window).on("resize",u)),r.body.appendChild(n),a=function(){}}function f(){a(),n.style.display=""}function l(){n&&(n.style.display="none")}var n,r=window.document,i,s=200;return{show:f,hide:l}});define("elego.dialog",["elego.mask","other.jquery","elego.event","elego.browser"],function(e,t,n,r){function s(e,t){if(!e)return this;this._init(e,t)}var i={fixedClass:"g-dialog-fixed",shimHtml:'<iframe frameborder="0" class="g-dialog-shim"></iframe>',shimWrapHtml:'<div class="g-dialog-shimwrap"></div>'};return s.prototype={_init:function(e,n){n=n||{},this._context=e,n.showMask===undefined?this._showMask=!0:this._showMask=n.showMask,n.effect===undefined?this._effect={type:"none"}:this._effect=n.effect,n.shim&&(e.children().wrapAll(i.shimWrapHtml),e.prepend(i.shimHtml)),this._container=n.container||t(window),this._isFixed=n.isFixed||!1,this._isFixed&&this._context.addClass(i.fixedClass),n.name&&this._context.addClass(n.name),this._width=e.width(),this._height=e.height()},_setPosition:function(){var e=(this._container.height()-this._height)/2,n=(this._container.width()-this._width)/2;this._isFixed||(e+=t(window).scrollTop()),this._context.css({left:n}),this._isFixed&&r.ie==6?this._context.css({"margin-top":-this._height/2}):this._context.css({top:e})},show:function(){this._setPosition(),this._showMask&&e.show();switch(this._effect.type){case"fade":this._context.fadeIn();break;default:this._context.show()}this.emit("show")},hide:function(t){t=t||{},this._showMask&&e.hide();switch(this._effect.type){case"fade":this._context.fadeOut();break;default:this._context.hide()}this.emit("hide",t.data)}},n.eventable(s),s});define("elego.json",function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(window.JSON)return window.JSON;var JSON={};typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")},JSON});(function(){var e;e=16;var t=0,n=["ms","moz","webkit","o"];for(var r=0;r<n.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,e-(r-t)),s=window.setTimeout(function(){n(r+i)},i);return t=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();define("elego.log",function(){function t(t){var n="log_"+(new Date).getTime(),r=window[e][n]=new Image;r.onload=r.onerror=function(){window[e][n]=null,delete window[e][n]},r.src=t}function n(e,n){var r=["t="+(new Date).getTime()];if(!n)t(e);else{for(var i in n)n.hasOwnProperty(i)&&n[i]!==undefined&&n[i]!==null&&n[i]!==""&&r.push(window.encodeURIComponent(i)+"="+window.encodeURIComponent(n[i]));t(e+"?"+r.join("&"))}}var e="__lego_log__";return window[e]={},{send:n}});define("elego.store",["elego.json"],function(e){function u(){try{return i in n&&n[i]}catch(e){return!1}}var t={},n=typeof window!="undefined"?window:global,r=n.document,i="localStorage",s="script",o;t.disabled=!1,t.version="1.3.20",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return t.get(e)!==undefined},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){r==null&&(r=n,n=null),n==null&&(n={});var i=t.get(e,n);r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(t){return e.stringify(t)},t.deserialize=function(t){if(typeof t!="string")return undefined;try{return e.parse(t)}catch(n){return t||undefined}};if(u())o=n[i],t.set=function(e,n){return n===undefined?t.remove(e):(o.setItem(e,t.serialize(n)),n)},t.get=function(e,n){var r=t.deserialize(o.getItem(e));return r===undefined?n:r},t.remove=function(e){o.removeItem(e)},t.clear=function(){o.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<o.length;n++){var r=o.key(n);e(r,t.get(r))}};else if(r&&r.documentElement.addBehavior){var a,f;try{f=new ActiveXObject("htmlfile"),f.open(),f.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),f.close(),a=f.w.frames[0].document,o=a.createElement("div")}catch(l){o=r.createElement("div"),a=r.body}var c=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),a.appendChild(o),o.addBehavior("#default#userData"),o.load(i);var r=e.apply(t,n);return a.removeChild(o),r}},h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),p=function(e){return e.replace(/^d/,"___$&").replace(h,"___")};t.set=c(function(e,n,r){return n=p(n),r===undefined?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=c(function(e,n,r){n=p(n);var i=t.deserialize(e.getAttribute(n));return i===undefined?r:i}),t.remove=c(function(e,t){t=p(t),e.removeAttribute(t),e.save(i)}),t.clear=c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(i)}),t.getAll=function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n},t.forEach=c(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i)n(s.name,t.deserialize(e.getAttribute(s.name)))})}try{var d="__storejs__";t.set(d,d),t.get(d)!=d&&(t.disabled=!0),t.remove(d)}catch(l){t.disabled=!0}return t.enabled=!t.disabled,t});define("eapp.record",["elego.cookie","elego.json"],function(e,t){"use strict";function i(r){var i=e.get(n[r]);return i?t.parse(i):[]}function s(t){e.set(n[t],"",{expires:-3600,domain:".360kan.com"})}function o(e,t){var n=i(e),s=null;for(var o=0;o<n.length;o++)if(n[o].id==t.id){s=n[o];break}s?(s.time=t.time,s.playnum=t.playnum):(n.unshift(t),n.length>r&&n.pop()),u(e,n)}function u(r,i){e.set(n[r],t.stringify(i),{expires:2592e6,domain:".360kan.com"})}function a(e,t){var n=i(e),r=n.length;while(r--)if(n[r].id==t){n.splice(r,1);break}u(e,n)}var n={all:"record2_all"},r=10;return{get:i,add:o,remove:s,removeById:a}});define("eapp.record2",["elego.store","elego.cookie","elego.browser","elego.serverdata"],function(e,t,n,r){"use strict";function u(){var n=i.tv,r=s.tv,o=[];if(e.has(n))return;var u=t.get(r);if(!u){e.set(n,o);return}u=u.split(","),$(u).each(function(e,t){t=t.split(/\|{1,2}/),o.push({id:t[0],title:t[1],url:t[2],time:t[3],playnum:t[4],site:t[5]})}),e.set(n,o)}function a(t){return e.get(i[t])||[]}function f(t){e.set(i[t],[])}function l(t,n){var r=a(t),s=null;for(var u=0;u<r.length;u++)if(r[u].id==n.id){s=r[u];break}s?(s.time=n.time,s.playnum=n.playnum):(r.unshift(n),r.length>o&&r.pop()),e.set(i[t],r)}function c(t,n){e.set(i[t],n)}function h(e,t){var n=a(e),r=n.length;while(r--)if(n[r].id==t){n.splice(r,1);break}c(e,n)}var i={all:"record2_all",tv:"record2_tv"},s={all:"view_history",tv:"dianshi_history"},o=10;return{translate:u,get:a,add:l,remove:f,removeById:h}});define("eapp.recordagent",["eapp.record2","elego.browser","elego.serverdata","eapp.record","elego.json"],function(e,t,n,r,i){function f(){var e="record-frame";a=document.createElement("iframe"),u||(a.style.display="none",a.id=e,a.src=n.get("domain.kan")+"/record/"/*,document.body.appendChild(a)*/)}function l(){return new Promise(function(t,n){u?t(e.get(s)):($(window).on("message",function(e){var e=window.event||e.originalEvent,e=i.parse(e.data);switch(e.type){case"get":t(e.data)}}),a.contentWindow.postMessage("get","*"))})}function c(t){u?e.removeById(s,t):a.contentWindow.postMessage("removebyid."+t,"*")}function h(){u?e.remove(s):a.contentWindow.postMessage("remove","*")}var s="all",o=t.ie&&t.ie<8,u=/www\.360kan\.com/.test(window.location.host)||o;o&&(e=r);var a=null;return{removeById:c,remove:h,init:f,get:l}});define("eapp.signup",["other.jquery","elego.cookie","elego.serverdata","elego.event"],function(e,t,n,r){function u(){if(!t.get("tkuc"))return o.emitOnce(s.nologin,"no cookie"),null;e.ajax({url:i.host+"/login/getuserinfo",data:null,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(e.data.home_url=n.get("domain.my")+"/u/index/"+e.data.qid,o.emitOnce(s.login,e.data)):o.emitOnce(s.nologin,e.msg)}})}function a(e,t){if(t=="")e.html(t);else{var n="<b></b>"+t;e.html(n)}}function f(e){return e==""?i.noTel:/^1[3578]\d{9}$/.test(e)?"":i.telError}function l(e){if(e=="")return i.noPwd;for(var t=0;t<e.length;t++){var n=e.charAt(t).charCodeAt();if(n<33||n>126)return i.pwdNoRule}return h(e)}function c(e,t){return e!=t?i.pwdDiffer:""}function h(e){return e.length<6?i.pwdLess:e.length>18?i.pwdMany:""}function p(e){return e==""?i.noCode:""}function d(t,n,r){var s,o;t.loginType=="1"?(s=i.httpshost+"/login/pclogin",o={loginPhone:t.tel,password:t.pwd,keepLogin:t.autoLogin}):(s=i.httpshost+"/login/pcloginbycaptcha",o={loginPhone:t.tel,captcha:t.code,keepLogin:1}),e.ajax({url:s,data:o,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&(u(),n()):r&&r(e.msg)}})}function v(t,n,r){e.ajax({url:i.host+"/reg/getcaptcha",data:{loginPhone:t.tel,act:t.act,piccaptcha:t.piccaptcha},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(t.obj.addClass(t.classname),n&&n(e.data)):r&&r(e)}})}function m(t,n){function s(e){var r=window.setInterval(function(){var s=0;e>0?(s=Math.floor(e),t.strObj.html(s+i.secondClew)):(clearInterval(r),t.strObj.html(i.getCodeClew),t.obj.attr("rel",""),t.obj.removeClass(t.classname),n&&n()),e--},1e3)}t.strObj.html(t.num+i.secondClew);var r=parseInt(t.num-1);e(function(){s(r)})}function g(t,n,r){e.ajax({url:i.httpshost+"/reg/pcregister",data:{loginPhone:t.tel,captcha:t.code,password:t.pwd},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&(u(),n(e.data)):r&&r(e.msg)}})}function y(t,n,r){e.ajax({url:i.httpshost+"/login/pcretrievepasswd",data:{loginPhone:t.tel,captcha:t.code,password:t.pwd},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&(u(),n()):r&&r(e.msg)}})}function b(t,n,r){e.ajax({url:i.host+"/reg/savenickname",data:{nickname:t.nickname,crumb:t.crumb},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&n():r&&r(e.msg)}})}function w(t,n,r){e.ajax({url:i.host+"/reg/checkloginphone",data:{loginPhone:t},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&n(e.data):r&&r(e.msg)}})}function E(t,n){e.ajax({url:i.host+"/login/pclogout",data:null,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?t&&t():n&&n(e.msg)}})}var i={host:n.get("domain.my"),httpshost:n.get("domain.httpsmy"),loginFail:"\u767b\u5f55\u5931\u8d25",networkError:"\u7f51\u7edc\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25",pwdLess:"\u5bc6\u7801\u4e0d\u80fd\u5c11\u4e8e6\u4f4d",pwdMany:"\u5bc6\u7801\u4e0d\u80fd\u591a\u4e8e18\u4f4d",pwdNoRule:"\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u8303",noTel:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",telError:"\u8f93\u5165\u624b\u673a\u53f7\u4e0d\u5408\u6cd5",noCode:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",noPwd:"\u8bf7\u8f93\u5165\u5bc6\u7801",pwdDiffer:"\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",protocol:"\u8bf7\u540c\u610f\u6ce8\u518c\u534f\u8bae\u53ca\u7248\u6743\u58f0\u660e",secondClew:"\u79d2\u540e\u53ef\u91cd\u53d1",getCodeClew:"\u83b7\u53d6\u9a8c\u8bc1\u7801"},s={login:"login",nologin:"nologin"},o;return o={setErrorInfo:a,checkMobile:f,checkPwd:l,comparePwd:c,checkPwdLength:h,checkCode:p,login:d,sendCode:v,changeVcodeClew:m,reg:g,forgetPwd:y,saveUserName:b,checkisRegTel:w,logout:E,updateUserInfo:u},r.eventable(o),u(),o});define("eblock.search2",["eapp.hotquery2","eapp.richquery2","eapp.commonquery","eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i,s,o,u){function p(){f.on("submit",function(e){c(e)}),f.on("change",function(e){v.emit("change",e)}),l.on("click",function(){return c(f.get()),!1})}function d(u){a="#{host}/index.php?kw=#{kw}&from=#{from}",f=new r("js-eb-suggest"),l=o("#js-eb-search-btn"),c=function(e){var t=s.get("domain.so");e==""&&(e=h);var n="";s.has("from")&&(n=s.get("from"));var r=i(a,{kw:window.encodeURIComponent(e),from:n,host:t});u.target=="self"?window.location.href=r:u.target=="blank"&&window.open(r)};if(window.location.host.indexOf("video.haosou.com")>=0||window.location.host.indexOf("video.so.com")>=0)c=function(e){o("#search-form").get(0).submit()};p(),e.on("ready",function(e){h=e}),e.init(f);switch(u.showType){case"common":n.init(f);break;default:t.init(f)}}var a="http://#{host}/index.php?kw=#{kw}&from=#{from}",f,l,c,h="",v={init:d};return u.eventable(v),v});define("eapp.hotquery2",["eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i){function p(){var e=(new Date).getTime()/6e5+"";e=e.split(".")[0];var t=n.get("domain.kan");r.ajax(t+"/hotquery?cb=?",{data:{fmt:"jsonp",t:e},crossDomain:!0,success:function(e){if(!e||!e[0])return;c=e,m.emit("ready",e[0]),o.val()==""&&o.val(c[0]),o.click(function(){o.addClass(f),o.val()==c[0]&&o.val(""),h.request()}),o.blur(function(){o.removeClass(f),o.val()==""&&o.val(c[0])})},dataType:"jsonp",jsonpCallback:"__jsonp0__",cache:!0})}function d(e){h.clear(),r.each(c,function(e,n){h.add(n,t(l,{index:e+1,text:n,className:e<3?"eb-suggest-index-top3":""}),"")}),h.show(),h.cache()}function v(e){h=e,p(),e.on("request",function(t){t===""&&c?(d(e),e.cache(),s.addClass(u)):s.removeClass(u)}),e.on("change",function(t){t===""?e.addClass(u):e.removeClass(u)}),e.on("emptyclick",function(t){t?e.hide():e.request()})}var s=r("#js-eb-suggest"),o=r(".js-query",s),u="eb-suggest-hot",a="eb-suggest-index-top3",f="eb-suggest-focus",l="<em class='eb-suggest-index #{className}'>#{index}</em><span>#{text}</span>",c=null,h,m={init:v};return i.eventable(m),m});define("eapp.commonquery",["elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r){function o(e){n.getJSON(i,{fmt:"jsonp",kw:e},function(t){if(!t||t.length==0){s.hide();return}s.clear(),n.each(t,function(t,n){s.add(n,n.replace(e,function(e){return"<b>"+e+"</b>"}),e)}),s.show()})}function u(e){s=e,s.on("itemclick",function(e){s.hide(),s.submit({q:e.q}),s.refreshQuery(e.q)}),s.on("request",function(e){if(e=="")return;o(e)})}var i="http://video.so.com/suggest.php?cb=?",a={init:u};return r.eventable(a),a});define("eapp.richquery2",["eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i){function h(e,n){e.push(t(f,{content:n},{isEscape:!1}))}function p(e,t){if(e.upinfo==0)return;e.upinfo==e.total?h(t,"\u5168 "+e.upinfo+" \u96c6"):h(t,"\u66f4\u65b0\u81f3\u7b2c "+e.upinfo+" \u96c6")}function d(e,n){var r=[],i="",s="<a class='eb-suggest-detail-item' href='#{url}'>#{name}</a>",o="<span class='eb-suggest-detail-span'>#{name}</span>",u=["<div class='eb-suggest-detail'>","<p class='eb-suggest-playbar'>#{playlinkHtml}</p>","</div>"].join(""),a='<p class="line2"><a class="eb-suggest-detailbutton" href="#{url}">\u67e5\u770b\u8be6\u60c5</a></p>',f='<a class="eb-suggest-detail-itemzy" href="#{url}">#{period} #{name}</a>',l='<p class="line2"><a class="eb-suggest-xkbutton" href="#{url}">\u8d2d\u4e70\u5728\u7ebf\u7535\u5f71\u7968</a></p>',c='<p class="line2"><a class="eb-suggest-button" href="#{url}">\u7acb\u5373\u64ad\u653e</a></p>';if(!n.playlink)return i=t(a,{url:n.url,title:n.title}),i;var h=n.playlink;switch(e){case"dy":switch(h.status){case"play":r.push(t(c,h));break;case"xiankan":r.push(t(l,{url:n.url}))}i=r.join("");break;case"dm":case"ds":for(var p=0;p<h.length;p++)h[p].url?r.push(t(s,h[p])):r.push(t(o,h[p]));i='<p class="line3">'+r.join("")+"</p>";break;case"zy":r.push(t(f,h)),i=t(u,r.join(""),{isEscape:!1});break;default:}return i}function v(e,t){if(!t)return"";var n=[];switch(e){case"dy":h(n,"\u5bfc\u6f14\uff1a"+t.director.join(" ")),h(n,"\u4e3b\u6f14\uff1a"+m(t.actor)),h(n,"\u7c7b\u578b\uff1a"+m(t.category));break;case"ds":p(t,n),h(n,"\u4e3b\u6f14\uff1a"+m(t.actor)),h(n,"\u5e74\u4ee3\uff1a"+t.year);break;case"dm":p(t,n),h(n,"\u7c7b\u578b\uff1a"+m(t.category)),h(n,"\u5730\u533a\uff1a"+m(t.area));break;case"zy":t.curperiod&&h(n,"\u66f4\u65b0\u81f3\u7b2c "+t.curperiod.replace("\u671f","")+" \u671f"),h(n,"\u4e3b\u6301\u4eba\uff1a"+m(t.director)),h(n,"\u5730\u533a\uff1a"+m(t.area));break;default:}return n.join("")}function m(e){var n=[];if(!e)return"";for(var i=0;i<e.length;i++)n.push(t("<b>#{text}</b>",{text:r.trim(e[i])}));return n.join("")}function g(e){r.getJSON(s,{fmt:"jsonp",ac:"richsug",kw:e},function(n){if(n.errno!==0){c.hide();return}if(n.data===null){c.hide();return}var i=n.data.suglist,s=n.data.detail,o=!1;c.clear(),r.each(i,function(n,i){i.showType=l[i.type];var f;i.type!="none"&&!o?(o=!0,s=s[i.type+"_"+i.info],s?(s.infos=v(i.type,s),i.playlinkHtml=d(i.type,s),s.vipicon=s.vip==1?"<em></em>":"",r.extend(i,s),f=a):f=u):f=u,c.add(i.word,t(f,i,{isEscape:!1}),e,{type:i.type,id:i.info})}),c.show(),c.cache()})}function y(e,n,i,u,f){r.getJSON(s,{fmt:"jsonp",type:e,id:n,ac:"detail"},function(n){if(n.errno!==0)return;if(n.data===null)return;n=n.data,n.word=f,n.showType=l[e],n.infos=v(e,n),n.playlinkHtml=d(e,n),n.vipicon=n.vip==1?"<em></em>":"",u.find("."+o).hide(),c.modify(t(a,n,{isEscape:!1}),i)})}function b(e){c=e,c.on("itemclick",function(e){c.hide();if(e.attr&&e.attr.type)if(e.target.tagName.toLowerCase()=="a"||e.target.parentNode.tagName.toLowerCase()=="a")return;c.submit({q:e.q}),c.refreshQuery(e.q)}),c.on("request",function(e){if(e=="")return;g(e)}),c.on("itemselected",function(e){var t=e.attr.type,n=e.attr.id;if(!t||t=="none")return;var r=e.selectedItem.find("."+o);r.length>0?(e.items.find("."+o).hide(),r.show()):y(t,n,e.selectedIndex,e.items,e.q)})}var s="http://video.so.com/suggest.php?cb=?",o="eb-suggest-content",u="#{word}<span class='eb-suggest-type'>#{showType}</span>",a=["#{word}","<span class='eb-suggest-type'>#{showType}</span>","<div class='"+o+" g-clear'>","<a href='#{url}' class='eb-suggest-img'><img src='#{cover}'/>#{vipicon}</a>","<h4 class='g-clear'><span>#{title}</span></h4>","#{infos}","#{playlinkHtml}","</div>"].join(""),f="<p class='line'>#{content}</p>",l={none:"",dy:"\u7535\u5f71",ds:"\u7535\u89c6\u5267",zy:"\u7efc\u827a",dm:"\u52a8\u6f2b"},c=null;return{init:b}});define("eblock.suggest",["other.jquery","elego.event","elego.format","elego.json"],function(e,t,n,r){function i(t,n){n=n||{};var r=this._container=e("#"+t);this._input=e(".js-query",r),this._list=e(".js-list",r),this._wrap=e(".js-wrap",r),this._itemClass="js-item",this._onClass="eb-suggest-on",this._itemTpl=n.itemTpl||"<li class='eb-suggest-item js-item' data-q=#{q} data-attr='#{attr}'>#{content}</li>",this._delay=n.delay||200,this._handler=null,this._query=e.trim(this._input.val()),this._skipOnce=!1,this._skipBlur=!1,this._selectedIndex=-1,this._cache={},this._init()}return i.prototype={_setItemOn:function(t){var n=this._getItems();if(n.length===0)return!1;var r=n.filter("."+this._onClass),i=r.length?n.index(r):-1;switch(t){case"up":i--,i<-1&&(i=n.length-1),this._input.data().q===undefined&&this._input.data("q",this._input.val());break;case"down":i++,i>=n.length&&(i=-1),this._input.data().q===undefined&&(this._input.data().q=this._input.val())}n.removeClass(this._onClass);var s="";i==-1?(s=this._input.data("q"),this._input.removeData("q")):s=n.eq(i).addClass(this._onClass).data().q,this._skipOnce=!0,this._input.val(s);var o=this._selectedIndex;return i>=0&&i!==o&&(this._selectedIndex=i,this.emit("itemselected",e.extend({selectedIndex:i,selectedItem:n.eq(i),items:n},n.eq(i).data()))),!0},_init:function(){var t=this;t._input.on("focus",function(){t._handler=window.setInterval(function(){t._request()},t._delay)}),t._input.on("blur",function(){t._request(),t._skipBlur||t.hide(),window.clearInterval(t._handler)}),t._wrap.on("mouseenter",function(){t._skipBlur=!0}),t._wrap.on("mouseleave",function(){t._skipBlur=!1}),t._list.on("mouseenter","."+t._itemClass,function(n){var r=t._getItems();r.removeClass(t._onClass),e(this).addClass(t._onClass);var i=r.index(this),s=t._selectedIndex;s!==i&&(t._selectedIndex=i,t.emit("itemselected",e.extend({selectedIndex:i,selectedItem:r.eq(i),items:r},e(this).data())))}),t._list.on("mouseleave",function(){e(this).removeClass(t._onClass)}),t._list.on("click","."+t._itemClass,function(n){var r=e(this).data("q");t.emit("itemclick",e.extend({target:n.target},e(this).data()))}),t._input.on("click",function(){e.trim(t._input.val())===""&&t.emit("emptyclick",t._wrap.css("display")=="none"?!1:!0)}),t._input.on("keydown",function(e){var n=!1;switch(e.keyCode){case 40:t._setItemOn("down")&&t.show(),n=!0;break;case 38:t._setItemOn("up")&&t.show(),n=!0;break;case 27:t.hide();break;case 13:e.preventDefault(),t.submit({q:t._query}),t.hide()}if(n)return!1})},_request:function(){var t=e.trim(this._input.val());if(t!==this._query){this._query=t;if(this._skipOnce){this._skipOnce=!1;return}this._cache[t]!==undefined?this._fill(this._cache[t]):this.emit("request",this._query),this.emit("change",this._query)}},refreshQuery:function(e){this._query=e,this._input.val(e)},request:function(){var t=e.trim(this._input.val());this._cache[t]!==undefined?this._fill(this._cache[t],t):this.emit("request",this._query)},submit:function(e){this._input.val(e.q),this._query=e.q,this.emit("submit",e.q)},_fill:function(e){this.clear(),this._list.html(e),e===""?this.hide():this.show()},_getItems:function(){return this._list.find("."+this._itemClass)},clear:function(){this._list.empty()},modify:function(e,t){if(t===undefined)throw new Error("index required!");if(t!=this._selectedIndex)return;this._getItems().eq(t).html(e)},add:function(e,t,i,s){if(i===undefined)throw new Error("query required!");if(i!=this._query)return;var o={q:e,content:t};s&&(o.attr=r.stringify(s)),this._list.append(n(this._itemTpl,o,{isEscape:!1}))},cache:function(){this._cache[this._query]=this._list.html()},show:function(){this._wrap.show()},hide:function(){this._wrap.hide()},get:function(){return this._query},addClass:function(e){this._container.addClass(e)},removeClass:function(e){this._container.removeClass(e)}},t.eventable(i),i});define("eblock.my",["other.jquery","eapp.signup","elego.serverdata","elego.format"],function(e,t,n,r){function c(e){o.hide(),u.show(),f.find("span").text(e.nickname).end().find("img").attr("src",e.img_url),s.find("ul").html(r(l,{myhost:n.get("domain.my"),qid:e.qid})),s.find(".js-logout").click(function(){return t.logout(function(){window.location.reload()}),!1})}var i=e("#js-ebucenter"),s=e(".js-layer",i),o=e(".js-nologin",i),u=e(".js-login",i),a=e(".js-my",i),f=e(".js-portrait",i),l=e(".js-tpl",i).html();if(!l)return;return t.once("login",c),o.click(function(){return window.location.href=r("#{host}/login/?destUrl=#{srcUrl}",{host:n.get("domain.my"),srcUrl:window.encodeURIComponent(window.location.href)}),!1}),{}});require(["other.jquery","elego.format","eapp.recordagent"],function(e,t,n){function h(n){if(n.length==0){e("#js-ebrecord-list").html(c);return}u.show();var r={month:(new Date).getMonth(),date:(new Date).getDate()},i={month:(new Date(new Date-864e5)).getMonth(),date:(new Date(new Date-864e5)).getDate()},s={month:(new Date(new Date-1728e5)).getMonth(),date:(new Date(new Date-1728e5)).getDate()},o='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title">#{title}</p>#{itemlist}</li>',f='<p class="eb-ucenter-layer-movie g-clear js-ebucenter-movie"><a target="_blank" href="#{url}" class="name">#{name}</a><span class="desc">#{desc}</span><a title="\u5220\u9664" href="javascript:;" id="#{mid}" class="del js-ebucenter-delete"></a></p>',l=[],h=[],p=[],d=[],v=[];for(var m=0,g=n.length;m<Math.min(g,10);m++){var y=new Date(parseInt(n[m].time)),b=y.getMonth(),w=y.getDate();b==r.month&&w==r.date?l.push(t(f,{url:n[m].url,name:n[m].title,desc:a[n[m].type],mid:n[m].id},{isEscape:!1})):b==i.month&&w==i.date?h.push(t(f,{url:n[m].url,name:n[m].title,desc:a[n[m].type],mid:n[m].id},{isEscape:!1})):b==s.month&&w==s.date?p.push(t(f,{url:n[m].url,name:n[m].title,desc:a[n[m].type],mid:n[m].id},{isEscape:!1})):d.push(t(f,{url:n[m].url,name:n[m].title,desc:a[n[m].type],mid:n[m].id},{isEscape:!1}))}l.length>0&&v.push(t(o,{title:"\u4eca\u5929",itemlist:l.join("")},{isEscape:!1})),h.length>0&&v.push(t(o,{title:"\u6628\u5929",itemlist:h.join("")},{isEscape:!1})),p.length>0&&v.push(t(o,{title:"\u524d\u5929",itemlist:p.join("")},{isEscape:!1})),d.length>0&&v.push(t(o,{title:"\u66f4\u65e9",itemlist:d.join("")},{isEscape:!1})),e("#js-ebrecord-list").html(v.join(""))}function p(){n.get().then(h)}var r=e("#js-ebucenter"),i=e("#js-ebrecord"),s=e("#js-ebrecord-layer"),o=e("#js-ebrecord-list"),u=e(".js-delall",s),a={tv:"\u7535\u89c6\u5267",movie:"\u7535\u5f71",comics:"\u52a8\u6f2b",arts:"\u7efc\u827a"},f=null,l=300,c='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title">\u65e0\u89c2\u770b\u8bb0\u5f55</p></li>';n.init(),u.on("click",function(t){n.remove(),u.hide(),e("#js-ebrecord-list").html(c);return}),e("#js-ebrecord-list").on("mouseenter",".js-ebucenter-movie",function(t){e(this).addClass("hover")}),e("#js-ebrecord-list").on("mouseleave",".js-ebucenter-movie",function(t){e(this).removeClass("hover")}),e("#js-ebrecord-list").on("click",".js-ebucenter-delete",function(t){var r=e(this).attr("id");return e(this.parentNode).hide(),n.removeById(r),e(".js-ebucenter-movie").length==0&&s.hide(),!1}),e("#js-ebrecord-wrap").on("mouseenter",function(e){p(),f=setTimeout(function(){s.show()},l)}),e("#js-ebrecord-wrap").on("mouseleave",function(e){f&&clearTimeout(f),s.hide(),u.hide()}),i.click(function(){return!1});var d=e("#js-ebapp"),v=e(".js-ebapp-layer",d);d.on("mouseenter",function(e){f=setTimeout(function(){v.show()},l)}),d.on("mouseleave",function(e){f&&clearTimeout(f),v.hide()})});require(["other.jquery"],function(e){e(document).on("click",".js-addfavorite",function(){try{window.external.AddFavorite("http://www.360kan.com","360\u5f71\u89c6_\u4e00\u7f51\u6253\u5c3d\u6240\u6709\u4e3b\u6d41\u89c6\u9891\u7f51\u7ad9\u7684\u5f71\u89c6\u5267")}catch(e){alert("\u8bf7\u4f7f\u7528\u6309\u952e Ctrl+d\uff0c\u6536\u85cf360\u5f71\u89c6_\u4e00\u7f51\u6253\u5c3d\u6240\u6709\u4e3b\u6d41\u89c6\u9891\u7f51\u7ad9\u7684\u5f71\u89c6\u5267")}return!1})});define("eblock.feedback",["other.jquery","elego.json","elego.dialog"],function(e,t,n){var r=e("#js-eb-feedback2"),i=r.find(".js-eb-feedbackform"),s={effect:"fade",shim:!0,isFixed:!0},o=function(e,t){n.call(this,e,t)};o.prototype=new n;var u=function(){i.get(0).reset(),r.find(".js-feedback-success").hide(),i.show(),r.find("textarea, input.number").removeClass("focus"),r.find(".tag li").removeClass("on").first().addClass("on")},a=function(){var t=this;r.find(".js-close").click(function(e){return t.hide(),!1}),r.find(".eb-feedback-tag li").click(function(t){var n=e(this).attr("data-text-default"),i=r.find("textarea");return e(this).addClass("on").siblings("li").removeClass("on"),i.hasClass("focus")||i.val(n).attr("data-text-default",n).removeClass("focus"),!1}),r.find("textarea, input.number").focus(function(){var t=e(this).addClass("focus").attr("data-text-default");r.find(".js-feedback-hit").hide(),this.value==t&&(this.value="")}).blur(function(){if(this.value.replace(/ /ig,"")==""){var t=e(this).removeClass("focus").attr("data-text-default");this.value=t}}),r.find(".js-submit-btn").click(function(t){var n=r.find(".js-message"),s=e.trim(n.val());if(-1!==e.inArray(s,["",n.attr("data-text-default")]))return r.find(".js-feedback-hit").show(),!1;var o=["",i.find(".on .m").html(),s].join("#");return r.find(".js-message-real").val(o),i.submit(),i.hide(),r.find(".js-feedback-success").show(),!1}),r.find(".js-feedback-again").click(function(){u()})},f=function(){var e=function(){var e={screen:"",browser:{}},n=window.navigator,r="userAgent,platform,product,language,oscpu,vendor,cookieEnabled,onLine,buildID".split(",");for(var i=0,s=r.length;i<s;++i)typeof n[r[i]]!="undefined"&&(e.browser[r[i]]=n[r[i]]);return e.screen=screen.width+"*"+screen.height,t.stringify(e)};r.find(".js-device-info").val(e()),r.find(".js-feedback-referer").val(window.location.href)},l=new o(r,s);return l.show=function(){u.call(this),o.prototype.show.call(this)},f.call(l),a.call(l),l});require(["other.jquery","eblock.feedback","elego.serverdata"],function(e,t,n){function o(){e(window).scrollTop()<400?s.css({visibility:"hidden"}):s.css({visibility:"visible"})}function a(){e(window).on("scroll",function(){u&&window.clearTimeout(u),u=window.setTimeout(function(){o(),u=null},300)}),i.click(function(e){return t.show(),!1}),s.click(function(){return e(window).scrollTop(0),!1}),o()}var r=e("#js-eb-sidefeedback2"),i=e(".js-feedback",r),s=e(".js-gotop",r),u=null;a()});require(["elego.browser","other.jquery"],function(e,t){"use strict";if(!e.ie||e.ie>=9)return;var n="js-playicon",r="g-playicon-mask",i="g-playicon-icon";t(document).on("mouseenter","."+n,function(){t("."+r,this).length==0&&t(this).removeClass(n).append("<span class='g-playicon-mask'></span><span class='g-playicon-icon'></span>")})});